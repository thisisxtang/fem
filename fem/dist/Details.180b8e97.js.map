{"version":3,"sources":["Carousel.js","Modal.js","Details.js"],"names":["Carousel","state","photos","active","handleIndexClick","event","setState","target","dataset","index","value","map","photo","media","filter","Component","modalRoot","document","getElementById","Modal","props","el","createElement","appendChild","removeChild","children","petfinder","key","secret","loading","LoadableContent","loader","Details","showModal","toggleModal","pet","get","output","id","then","data","breed","Array","isArray","breeds","join","name","animal","location","contact","city","decription","description","catch"],"mappings":"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","file":"Details.180b8e97.js","sourceRoot":"../src","sourcesContent":["import React, { Component } from \"react\";\n\nclass Carousel extends Component {\n  state = {\n    photos: [],\n    active: 0\n  };\n\n  static getDerivedStateFromProps({ media }) {\n    let photos = [];\n    if (media && media.photos && media.photos.photo) {\n      photos = media.photos.photo.filter(photo => photo[\"@size\"] === \"pn\");\n    }\n\n    return { photos };\n  }\n\n  handleIndexClick = event => {\n    //array function is diff from function, it combind the current context\n    this.setState({\n      active: +event.target.dataset.index //turn string into a number\n    });\n  };\n  render() {\n    const { photos, active } = this.state;\n\n    return (\n      <div className=\"carousel\">\n        <img src={photos[active].value} alt=\"primary one\" />\n        <div className=\"carousel-smaller\">\n          {photos.map((photo, index) => (\n            /*eslint-disable-next-line*/\n            <img\n              onClick={this.handleIndexClick}\n              key={photo.value}\n              data-index={index}\n              src={photo.value}\n              className={index === active ? \"active\" : \"\"}\n              alt=\"animal thumbnail\"\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Carousel;\n","import React, { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nconst modalRoot = document.getElementById(\"modal\");\n\nclass Modal extends Component {\n  constructor(props) {\n    super(props);\n    this.el = document.createElement(\"div\");\n  }\n\n  componentDidMount() {\n    modalRoot.appendChild(this.el);\n  }\n\n  componentWillUnmount() {\n    modalRoot.removeChild(this.el);\n  }\n\n  render() {\n    return createPortal(this.props.children, this.el);\n  }\n}\n\nexport default Modal;\n","import React, { Component } from \"react\";\nimport pf from \"petfinder-client\";\nimport Loadable from \"react-loadable\";\nimport { navigate } from \"@reach/router/lib/history\";\nimport Carousel from \"./Carousel\";\nimport Modal from \"./Modal\";\n\nconst petfinder = pf({\n  key: process.env.API_KEY,\n  secret: process.env.API_SECRET\n}); // refer things from env file\n\nconst loading = () => <h1>loading content ... </h1>;\nconst LoadableContent = Loadable({\n  loader: () => import(\"./AdoptModalContent\"),\n  loading\n});\n\nclass Details extends Component {\n  state = {\n    loading: true,\n    showModal: false\n  };\n\n  toggleModal = () => this.setState({ showModal: !this.state.showModal });\n\n  componentDidMount() {\n    petfinder.pet\n      .get({\n        output: \"full\",\n        id: this.props.id\n      })\n      .then(data => {\n        const pet = data.petfinder.pet;\n        let breed;\n        if (Array.isArray(pet.breeds.breed)) {\n          breed = pet.breeds.breed.join(\", \");\n        } else {\n          breed = pet.breeds.breed;\n        }\n        this.setState({\n          name: pet.name,\n          animal: pet.animal,\n          location: `${pet.contact.city}, ${pet.contact.state}`,\n          decription: pet.description,\n          media: pet.media,\n          breed,\n          loading: false\n        });\n      })\n      .catch(() => {\n        navigate(\"/\");\n      });\n  }\n  render() {\n    if (this.state.loading) {\n      return <h1>loading</h1>;\n    }\n    const {\n      name,\n      animal,\n      breed,\n      location,\n      description,\n      media,\n      showModal\n    } = this.state;\n\n    return (\n      <div className=\"details\">\n        <Carousel media={media} />\n        <h1>{name}</h1>\n        <h2>\n          {animal}-{breed} -{location}\n        </h2>\n        <button onClick={this.toggleModal}>Adopt {name}</button>\n        <p>{description}</p>\n        {showModal ? (\n          <Modal>\n            <LoadableContent toggleModal={this.toggleModal} name={name} />\n          </Modal>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default Details;\n"]}